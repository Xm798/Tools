# Author: Xm798
# Update: 2023-06-19
# Title: Clash Meta é…ç½®æ–‡ä»¶
# Description: è‡ªç”¨é…ç½®æ–‡ä»¶ï¼Œä½¿ç”¨äº† Mata æ ¸ç‰¹æ€§ï¼Œæ— æ³•ç”¨äºåŸç‰ˆ Clash æ ¸å’Œ Clash p æ ¸ã€‚æ”¯æŒ Meta æ ¸çš„å®¢æˆ·ç«¯å‚è§ï¼šhttps://docs.metacubex.one/used ã€‚

# ---------- ANCHORS ----------
anchors:
  proxy-groups:
    proxies_fallback: &proxies_fallback
        - ğŸ‡­ğŸ‡° é¦™æ¸¯
        - ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡
        - ğŸ‡¨ğŸ‡³ å°æ¹¾
        - ğŸ‡¯ğŸ‡µ æ—¥æœ¬
        - ğŸ‡ºğŸ‡¸ ç¾å›½
        - ğŸ‡ºğŸ‡³ å…¶ä»–
    proxies_select: &proxies_select
        - ğŸ‰ æ•…éšœè½¬ç§»
        - ğŸ‡­ğŸ‡° é¦™æ¸¯
        - ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡
        - ğŸ‡¨ğŸ‡³ å°æ¹¾
        - ğŸ‡¯ğŸ‡µ æ—¥æœ¬
        - ğŸ‡ºğŸ‡¸ ç¾å›½
        - ğŸ‡ºğŸ‡³ å…¶ä»–
        - ğŸš€ æ‰‹åŠ¨é€‰æ‹©
        - ğŸ¯ å…¨çƒç›´è¿
    proxies_normal: &proxies_normal
        - ğŸª èŠ‚ç‚¹é€‰æ‹©
        - ğŸ‡­ğŸ‡° é¦™æ¸¯
        - ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡
        - ğŸ‡¨ğŸ‡³ å°æ¹¾
        - ğŸ‡¯ğŸ‡µ æ—¥æœ¬
        - ğŸ‡ºğŸ‡¸ ç¾å›½
        - ğŸ‡ºğŸ‡³ å…¶ä»–
        - ğŸš€ æ‰‹åŠ¨é€‰æ‹©
        - ğŸ¯ å…¨çƒç›´è¿
    proxies_lowmagf: &proxies_lowmagf
        - ğŸ—³ ä½å€ç‡èŠ‚ç‚¹
        - ğŸª èŠ‚ç‚¹é€‰æ‹©
        - ğŸ‡­ğŸ‡° é¦™æ¸¯
        - ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡
        - ğŸ‡¨ğŸ‡³ å°æ¹¾
        - ğŸ‡¯ğŸ‡µ æ—¥æœ¬
        - ğŸ‡ºğŸ‡¸ ç¾å›½
        - ğŸ‡ºğŸ‡³ å…¶ä»–
        - ğŸš€ æ‰‹åŠ¨é€‰æ‹©
        - ğŸ¯ å…¨çƒç›´è¿
    proxies_directf: &proxies_directf
        - ğŸ¯ å…¨çƒç›´è¿
        - ğŸª èŠ‚ç‚¹é€‰æ‹©
        - ğŸ‡­ğŸ‡° é¦™æ¸¯
        - ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡
        - ğŸ‡¨ğŸ‡³ å°æ¹¾
        - ğŸ‡¯ğŸ‡µ æ—¥æœ¬
        - ğŸ‡ºğŸ‡¸ ç¾å›½
        - ğŸ‡ºğŸ‡³ å…¶ä»–
        - ğŸš€ æ‰‹åŠ¨é€‰æ‹©

  proxies_urltest_conf: &proxies_urltest_conf
    type: url-test
    url: "http://www.gstatic.com/generate_204"
    interval: 300
    tolerance: 150
  proxies_fallback_conf: &proxies_fallback_conf
    type: fallback
    url: "http://www.gstatic.com/generate_204"
    interval: 300
    tolerance: 150
  airport_common: &airport_common
    type: http
    interval: 86400
    health-check:
      enable: true
      url: "http://www.gstatic.com/generate_204"
      interval: 1800
  rule_providers:
    classical: &rule_providers_classical
      type: http
      behavior: classical
      interval: 86400
    domain: &rule_providers_domain
      type: http
      behavior: domain
      interval: 86400
    ipcidr: &rule_providers_ipcidr
      type: http
      behavior: ipcidr
      interval: 86400
  proxy-filters:
    proxy-filters-HK: &proxy-filters-HK "æ¸¯|HK|(?i)Hong"
    proxy-filters-SG: &proxy-filters-SG "æ–°|SG|(?i)Singapore"
    proxy-filters-TW: &proxy-filters-TW "å°|TW|(?i)Taiwan"
    proxy-filters-JP: &proxy-filters-JP "æ—¥|JP|(?i)Japan"
    proxy-filters-US: &proxy-filters-US "ç¾|US|(?i)United States"
    proxy-filters-TR: &proxy-filters-TR "åœŸè€³å…¶|TUR|Turkey"
    proxy-filters-DE: &proxy-filters-DE "å¾·å›½|DE|(?i)Germany"
    proxy-filters-UK: &proxy-filters-UK "è‹±å›½|UK|(?i)United Kingdom"
    proxy-filters-NL: &proxy-filters-NL "è·å…°|NL|(?i)Netherlands"
    proxy-filters-FR: &proxy-filters-FR "æ³•å›½|FR|(?i)France"
    proxy-filters-IN: &proxy-filters-IN "å°åº¦|IN|(?i)India"
    proxy-filters-AR: &proxy-filters-AR "é˜¿æ ¹å»·|ARG|(?i)Argentina"
    proxy-filters-KR: &proxy-filters-KR "éŸ©å›½|KR|(?i)Korean"
    proxy-filters-RU: &proxy-filters-RU "ä¿„ç½—æ–¯|RU|(?i)Russia"
    proxy-filters-PH: &proxy-filters-PH "è²å¾‹å®¾|PH|(?i)Philippines"
    proxy-filters-MY: &proxy-filters-MY "é©¬æ¥è¥¿äºš|MY|(?i)Malaysia"
    proxy-filters-OTHER: &proxy-filters-OTHER "^(?:(?!é¦™æ¸¯|HK|(?i)Hong|å°æ¹¾|TW|(?i)Taiwan|æ—¥æœ¬|JP|(?i)Japan|æ–°åŠ å¡|(?i)Singapore|SG|ç¾å›½|(?i)United States|åˆ°æœŸ|å‰©ä½™æµé‡|æ—¶é—´|å®˜ç½‘|äº§å“|Traffic|Expire).)*$"
    proxy-filters-LOW-MAG: &proxy-filters-LOW-MAG 'å®éªŒæ€§|0\.1(?i)x|0\.2(?i)x|0\.3(?i)x|0\.4(?i)x|0\.5(?i)x|0\.6(?i)x|0\.7(?i)x|0\.8(?i)x|0\.9(?i)x'

# ---------- GENERAL ----------
port: 7890
socks-port: 7891
redir-port: 7892
mixed-port: 7893
allow-lan: true
mode: rule
log-level: info
external-controller: 127.0.0.1:9090

dns:
  enable: true
  ipv6: false # æ˜¯å¦è§£æ IPv6 åœ°å€
  listen: 0.0.0.0:53
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  fake-ip-filter:
    - "*.lan"
    - localhost.ptlogin2.qq.com
    - +.srv.nintendo.net
    - +.stun.playstation.net
    - +.msftconnecttest.com
    - +.msftncsi.com
    - +.xboxlive.com
    - msftconnecttest.com
    - xbox.*.microsoft.com
    - "*.battlenet.com.cn"
    - "*.battlenet.com"
    - "*.blzstatic.cn"
    - "*.battle.net"
  nameserver:
    - 223.5.5.5
    - 119.29.29.29
  fallback:
    - https://cloudflare-dns.com/dns-query
    - https://dns.google/dns-query
    - https://dns.alidns.com/dns-query
  fallback-filter:
    geoip: true
    geoip-code: CN
    ipcidr:
      - 240.0.0.0/4

# ---------- PROXY-PROVIDERS ----------
# å¦‚æœåªæœ‰ä¸€ä¸ªæˆ–ä¸¤ä¸ªä»¥ä¸Šæœºåœºï¼Œæ³¨æ„ä¿®æ”¹æ­¤å¤„é…ç½®å’Œ proxy-groups éƒ¨åˆ†ä¸­ useå­—æ®µ æ¶‰åŠçš„éƒ¨åˆ†ï¼Œå¦‚ use: [AirPort1, AirPort2]ã€‚
proxy-providers:
  AirPort1:
    <<: *airport_common
    url: "Your subscription link" # è¯·å¡«å†™ä½ çš„è®¢é˜…é“¾æ¥
    path: ./proxy_providers/AirPort1.yaml
  AirPort2:
    <<: *airport_common
    url: "Your subscription link" # è¯·å¡«å†™ä½ çš„è®¢é˜…é“¾æ¥
    path: ./proxy_providers/AirPort2.yaml

# ---------- PROXIES ----------
proxies: null

proxy-groups:
  - {name: ğŸ‰ æ•…éšœè½¬ç§», <<: *proxies_fallback_conf, interval: 180, proxies: *proxies_fallback}
  - {name: ğŸª èŠ‚ç‚¹é€‰æ‹©, type: select, proxies: *proxies_select}
  - {name: ğŸ¤– AI Chat, type: select, proxies: [ğŸ‡ºğŸ‡¸ ç¾å›½, ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡]}
  - {name: ğŸ—³ï¸ PT ç«™ç‚¹, type: select, use: [AirPort1, AirPort2], filter: *proxy-filters-HK, proxies: [ğŸ¯ å…¨çƒç›´è¿, ğŸš€ æ‰‹åŠ¨é€‰æ‹©]}
  - {name: ğŸ’¾ ç½‘ç›˜æœåŠ¡,  type: select, proxies: *proxies_lowmagf}
  - {name: ğŸ“§ é‚®ä»¶æœåŠ¡,  type: select, proxies: *proxies_normal}
  - {name: ğŸ“¡ æµ‹é€ŸæœåŠ¡,  type: select, proxies: *proxies_directf}
  - {name: ğŸï¸ E-Hentai, type: select, proxies: *proxies_normal}
  - {name: ğŸŒ è°·æ­ŒæœåŠ¡,  type: select, proxies: *proxies_normal}
  - {name: ğŸ è‹¹æœæœåŠ¡,  type: select, proxies: *proxies_directf}
  - {name: ğŸ’¾ å¾®è½¯æœåŠ¡,  type: select, proxies: *proxies_directf}
  - {name: ğŸ® æ¸¸æˆæœåŠ¡,  type: select, proxies: *proxies_normal}
  - {name: ğŸ“º æ¸¯å°åª’ä½“,  type: select, proxies: *proxies_directf}
  - {name: ğŸ“¹ å›½é™…åª’ä½“,  type: select, proxies: *proxies_lowmagf}
  - {name: ğŸŸ æ¼ç½‘ä¹‹é±¼,  type: select, proxies: *proxies_normal}
  - {name: ğŸ§ª å­¦æœ¯æœåŠ¡, type: select, proxies: *proxies_directf}
  - {name: ğŸš€ æ‰‹åŠ¨é€‰æ‹©, type: select, use: [AirPort1, AirPort2]}

  - {name: ğŸ—³ ä½å€ç‡èŠ‚ç‚¹, <<: *proxies_urltest_conf, use: [AirPort1], filter: *proxy-filters-LOW-MAG}
  - {name: ğŸ‡­ğŸ‡° é¦™æ¸¯, <<: *proxies_urltest_conf, use: [AirPort1, AirPort2], filter: *proxy-filters-HK}
  - {name: ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡, <<: *proxies_urltest_conf, use: [AirPort1, AirPort2], filter: *proxy-filters-SG}
  - {name: ğŸ‡¨ğŸ‡³ å°æ¹¾, <<: *proxies_urltest_conf, use: [AirPort1, AirPort2], filter: *proxy-filters-TW}
  - {name: ğŸ‡¯ğŸ‡µ æ—¥æœ¬, <<: *proxies_urltest_conf, use: [AirPort1, AirPort2], filter: *proxy-filters-JP}
  - {name: ğŸ‡ºğŸ‡¸ ç¾å›½, <<: *proxies_urltest_conf, use: [AirPort1, AirPort2], filter: *proxy-filters-US}
  - {name: ğŸ‡ºğŸ‡³ å…¶ä»–, type: select, use: [AirPort1, AirPort2], filter: *proxy-filters-OTHER}

  - {name: â›”ï¸ éšç§å¹¿å‘Š, type: select, proxies: [REJECT, ğŸ¯ å…¨çƒç›´è¿, ğŸª èŠ‚ç‚¹é€‰æ‹©]}
  - {name: ğŸ¯ å…¨çƒç›´è¿, type: select, proxies: [DIRECT]}

# ---------- RULES ----------
rules:
  - RULE-SET,Proxy,ğŸª èŠ‚ç‚¹é€‰æ‹©
  - RULE-SET,Direct,ğŸ¯ å…¨çƒç›´è¿
  - RULE-SET,Direct_2,ğŸ¯ å…¨çƒç›´è¿
  - RULE-SET,Advertising_Domain,â›”ï¸ éšç§å¹¿å‘Š
  - RULE-SET,Advertising,â›”ï¸ éšç§å¹¿å‘Š
  - RULE-SET,Scholar,ğŸ§ª å­¦æœ¯æœåŠ¡
  - RULE-SET,Scholar_2,ğŸ§ª å­¦æœ¯æœåŠ¡
  - RULE-SET,EHGallery,ğŸï¸ E-Hentai
  - RULE-SET,Lark,ğŸª èŠ‚ç‚¹é€‰æ‹©
  - RULE-SET,AI,ğŸ¤– AI Chat
  - RULE-SET,PT,ğŸ—³ï¸ PT ç«™ç‚¹
  - RULE-SET,Mail,ğŸ“§ é‚®ä»¶æœåŠ¡
  - RULE-SET,GoogleDrive,ğŸ’¾ ç½‘ç›˜æœåŠ¡
  - RULE-SET,DropBox,ğŸ’¾ ç½‘ç›˜æœåŠ¡
  - RULE-SET,Telegram,ğŸª èŠ‚ç‚¹é€‰æ‹©
  - RULE-SET,Emby,ğŸ“¹ å›½é™…åª’ä½“
  - RULE-SET,AsianMedia,ğŸ“º æ¸¯å°åª’ä½“
  - RULE-SET,GlobalMedia,ğŸ“¹ å›½é™…åª’ä½“
  - RULE-SET,WeChat,ğŸ¯ å…¨çƒç›´è¿
  - RULE-SET,ProxyLite,ğŸª èŠ‚ç‚¹é€‰æ‹©
  - RULE-SET,Speedtest,ğŸ“¡ æµ‹é€ŸæœåŠ¡
  - RULE-SET,Game,ğŸ® æ¸¸æˆæœåŠ¡
  - RULE-SET,Steam,ğŸ® æ¸¸æˆæœåŠ¡
  - RULE-SET,Epic,ğŸ® æ¸¸æˆæœåŠ¡
  - RULE-SET,Google,ğŸŒ è°·æ­ŒæœåŠ¡
  - RULE-SET,Microsoft,ğŸ’¾ å¾®è½¯æœåŠ¡
  - RULE-SET,Apple,ğŸ è‹¹æœæœåŠ¡
  - RULE-SET,Global_Domain,ğŸª èŠ‚ç‚¹é€‰æ‹©
  - RULE-SET,Global,ğŸª èŠ‚ç‚¹é€‰æ‹©
  - RULE-SET,Lan,ğŸ¯ å…¨çƒç›´è¿
  - RULE-SET,PrivateTracker,ğŸ¯ å…¨çƒç›´è¿
  - RULE-SET,China_Classical,ğŸ¯ å…¨çƒç›´è¿
  - RULE-SET,China_IPs,ğŸ¯ å…¨çƒç›´è¿
  - GEOIP,CN,ğŸ¯ å…¨çƒç›´è¿
  - MATCH,ğŸŸ æ¼ç½‘ä¹‹é±¼

# ---------- RULE-PROVIDERS ----------
rule-providers:
  Proxy:
    <<: *rule_providers_classical
    url: https://fastly.jsdelivr.net/gh/Xm798/Tools@latest/ProxyRules/Clash/Proxy.yaml
    path: ./rule_providers/Proxy.yaml
  Direct:
    <<: *rule_providers_classical
    url: https://cdn.jwsdelivr.net/gh/Xm798/Tools@latest/ProxyRules/Clash/Direct.yaml
    path: ./rule_providers/Direct.yaml
  Direct_2:
    <<: *rule_providers_classical
    url: https://fastly.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Direct/Direct.yaml
    path: ./rule_providers/Direct_2.yaml
  Advertising_Domain:
    <<: *rule_providers_domain
    url: https://fastly.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Advertising/AdvertisingLite_Domain.yaml
    path: ./rule_providers/Advertising_Domain.yaml
  Advertising:
    <<: *rule_providers_classical
    url: https://fastly.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Advertising/AdvertisingLite.yaml
    path: ./rule_providers/Advertising.yaml
  Scholar:
    <<: *rule_providers_classical
    url: https://fastly.jsdelivr.net/gh/Xm798/Tools@latest/ProxyRules/Clash/Scholar.yaml
    path: ./rule_providers/Scholar.yaml
  Scholar_2:
    <<: *rule_providers_classical
    url: https://fastly.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Scholar/Scholar.yaml
    path: ./rule_providers/Scholar_2.yaml
  EHGallery:
    <<: *rule_providers_classical
    url: https://fastly.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/EHGallery/EHGallery.yaml
    path: ./rule_providers/EHGallery.yaml
  Lark:
    <<: *rule_providers_classical
    url: https://fastly.jsdelivr.net/gh/Xm798/Tools@latest/ProxyRules/Clash/Lark.yaml
    path: ./rule_providers/Lark.yaml
  AI:
    <<: *rule_providers_classical
    url: https://fastly.jsdelivr.net/gh/Xm798/Tools@latest/ProxyRules/Clash/AI.yaml
    path: ./rule_providers/AI.yaml
  PT:
    <<: *rule_providers_classical
    url: https://fastly.jsdelivr.net/gh/Xm798/Tools@latest/ProxyRules/Clash/PT.yaml
    path: ./rule_providers/PT.yaml
  Mail:
    <<: *rule_providers_classical
    url: https://fastly.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Mail/Mail.yaml
    path: ./rule_providers/Mail.yaml
  GoogleDrive:
    <<: *rule_providers_classical
    url: https://fastly.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/GoogleDrive/GoogleDrive.yaml
    path: ./rule_providers/Drive.yaml
  DropBox:
    <<: *rule_providers_classical
    url: https://fastly.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Dropbox/Dropbox.yaml
    path: ./rule_providers/DropBox.yaml
  Telegram:
    <<: *rule_providers_classical
    url: https://fastly.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Telegram/Telegram.yaml
    path: ./rule_providers/Telegram.yaml
  Emby:
    <<: *rule_providers_classical
    url: https://fastly.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Emby/Emby.yaml
    path: ./rule_providers/Emby.yaml
  AsianMedia:
    <<: *rule_providers_classical
    url: https://fastly.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/AsianMedia/AsianMedia.yaml
    path: ./rule_providers/AsianMedia.yaml
  GlobalMedia:
    <<: *rule_providers_classical
    url: https://fastly.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/GlobalMedia/GlobalMedia.yaml
    path: ./rule_providers/GlobalMedia.yaml
  WeChat:
    <<: *rule_providers_classical
    url: https://fastly.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/WeChat/WeChat.yaml
    path: ./rule_providers/WeChat.yaml
  ProxyLite:
    <<: *rule_providers_classical
    url: https://fastly.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/ProxyLite/ProxyLite.yaml
    path: ./rule_providers/ProxyLite.yaml
  Speedtest:
    <<: *rule_providers_classical
    url: https://fastly.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Speedtest/Speedtest.yaml
    path: ./rule_providers/Speedtest.yaml
  Game:
    <<: *rule_providers_classical
    url: https://fastly.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Game/Game.yaml
    path: ./rule_providers/Game.yaml
  Steam:
    <<: *rule_providers_classical
    url: https://fastly.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Steam/Steam.yaml
    path: ./rule_providers/Steam.yaml
  Epic:
    <<: *rule_providers_classical
    url: https://fastly.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Epic/Epic.yaml
    path: ./rule_providers/Epic.yaml
  Google:
    <<: *rule_providers_classical
    url: https://fastly.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Google/Google.yaml
    path: ./rule_providers/Google.yaml
  Microsoft:
    <<: *rule_providers_classical
    url: https://fastly.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Microsoft/Microsoft.yaml
    path: ./rule_providers/Microsoft.yaml
  Apple:
    <<: *rule_providers_classical
    url: https://fastly.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Apple/Apple.yaml
    path: ./rule_providers/Apple.yaml
  Global_Domain:
    <<: *rule_providers_domain
    url: https://fastly.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Global/Global_Domain.yaml
    path: ./rule_providers/Global_Domain.yaml
  Global:
    <<: *rule_providers_classical
    url: https://fastly.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Global/Global.yaml
    path: ./rule_providers/Global.yaml
  Lan:
    <<: *rule_providers_classical
    url: https://fastly.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/Lan/Lan.yaml
    path: ./rule_providers/Lan.yaml
  PrivateTracker:
    <<: *rule_providers_classical
    url: https://fastly.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/PrivateTracker/PrivateTracker.yaml
    path: ./rule_providers/PrivateTracker.yaml
  China_Classical:
    <<: *rule_providers_classical
    url: https://fastly.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/China/China_Classical.yaml
    path: ./rule_providers/China_Classical.yaml
  China_IPs:
    <<: *rule_providers_ipcidr
    url: https://fastly.jsdelivr.net/gh/blackmatrix7/ios_rule_script@master/rule/Clash/ChinaIPs/ChinaIPs_IP.yaml
    path: ./rule_providers/China_IPs.yaml
