# > Author: Xm798
# > Surge è‡ªç”¨é…ç½®æ–‡ä»¶
# > å®˜æ–¹æ‰‹å†Œ - https://manual.nssurge.com/
# > å¸®åŠ©ä¸­å¿ƒ - https://nssurge.zendesk.com/
# > è®¢é˜… - éœ€é…åˆ Sub-Store (https://github.com/sub-store-org/Sub-Store) é£Ÿç”¨ï¼ˆå•æœºåœºå¯ç›´æ¥ä½¿ç”¨è®¢é˜…é“¾æ¥ï¼‰

[General]
loglevel = notify
test-timeout = 5
internet-test-url = http://www.gstatic.com/generate_204
proxy-test-url = http://cp.cloudflare.com/generate_204
show-error-page-for-reject = true

# > IPV6 æ”¯æŒ
ipv6 = true
ipv6-vif = auto

# > DNS è®¾ç½®
read-etc-hosts = true
dns-server = 223.5.5.5, 119.29.29.29, 2402:4e00::, 2400:3200::1, 2400:3200:baba::1
encrypted-dns-server = https://doh.pub/dns-query
# doh-follow-outbound-mode=true
# use-local-host-item-for-proxy = true

# > GeoIP æ•°æ®åº“
geoip-maxmind-url = https://cdn.jsdelivr.net/gh/alecthw/mmdb_china_ip_list@release/Country.mmdb

# > Wi-Fi è®¿é—®
allow-wifi-access = false

# > è¿œç¨‹æ§åˆ¶å™¨
external-controller-access = Password@127.0.0.1:6170
http-api = Password@127.0.0.1:6171
http-api-tls = false
http-api-web-dashboard = true

# > è·³è¿‡ä»£ç†
skip-proxy = localhost, *.local, captive.apple.com, e.crashlytics.com, passenger.t3go.cn, yunbusiness.ccb.com, wxh.wo.cn, gate.lagou.com, www.abchina.com.cn, login-service.mobile-bank.psbc.com, mobile-bank.psbc.com, bankcomm.cn, ::1/128, fe80::/10
# > Always Real IP Hosts
always-real-ip = *.lan, cable.auth.com, *.msftconnecttest.com, *.msftncsi.com, network-test.debian.org, stun.*, *.pingan.com.cn, *.cmbchina.com, pool.ntp.org, *.pool.ntp.org, ntp.*.com, time.*.com, ntp?.*.com, time?.*.com, time.*.gov, time.*.edu.cn, *.ntp.org.cn

# > iOS Only
allow-hotspot-access = true


[Replica]
hide-apple-request = 1
hide-crashlytics-request = 1


[Proxy Group]
ğŸª èŠ‚ç‚¹é€‰æ‹© = select, ğŸ”ï¸ è‡ªåŠ¨é€‰æ‹©, ğŸ‡­ğŸ‡° é¦™æ¸¯, ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡, ğŸ‡¨ğŸ‡³ å°æ¹¾, ğŸ‡¯ğŸ‡µ æ—¥æœ¬, ğŸ‡ºğŸ‡¸ ç¾å›½, ğŸ‡ºğŸ‡³ å…¶ä»–, âœŒï¸ æ‰‹åŠ¨é€‰æ‹©, DIRECT
ğŸ”ï¸ è‡ªåŠ¨é€‰æ‹© = fallback, ğŸ‡­ğŸ‡° é¦™æ¸¯, ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡, ğŸ‡¨ğŸ‡³ å°æ¹¾, ğŸ‡¯ğŸ‡µ æ—¥æœ¬, ğŸ‡ºğŸ‡¸ ç¾å›½, ğŸ‡ºğŸ‡³ å…¶ä»–, url=http://www.gstatic.com/generate_204, interval=180
ğŸ¤– AI Chat = select, ğŸ‡ºğŸ‡¸ ç¾å›½, ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡, ğŸ‡¯ğŸ‡µ æ—¥æœ¬, ğŸ‡ºğŸ‡³ å…¶ä»–, ğŸ‡­ğŸ‡° é¦™æ¸¯, ğŸ‡¨ğŸ‡³ å°æ¹¾, ğŸª èŠ‚ç‚¹é€‰æ‹©
ğŸ—³ï¸ PT ç«™ç‚¹ = select, DIRECT, ğŸª èŠ‚ç‚¹é€‰æ‹©, ğŸ‡­ğŸ‡° é¦™æ¸¯, ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡, ğŸ‡¨ğŸ‡³ å°æ¹¾, ğŸ‡¯ğŸ‡µ æ—¥æœ¬, ğŸ‡ºğŸ‡¸ ç¾å›½, ğŸ‡ºğŸ‡³ å…¶ä»–, âœŒï¸ æ‰‹åŠ¨é€‰æ‹©
ğŸ¼ Spotify = select, DIRECT, ğŸª èŠ‚ç‚¹é€‰æ‹©, ğŸ‡­ğŸ‡° é¦™æ¸¯, ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡, ğŸ‡¨ğŸ‡³ å°æ¹¾, ğŸ‡¯ğŸ‡µ æ—¥æœ¬, ğŸ‡ºğŸ‡¸ ç¾å›½, ğŸ‡ºğŸ‡³ å…¶ä»–, âœŒï¸ æ‰‹åŠ¨é€‰æ‹©
ğŸï¸ E-Hentai = select, DIRECT, ğŸª èŠ‚ç‚¹é€‰æ‹©, ğŸ‡­ğŸ‡° é¦™æ¸¯, ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡, ğŸ‡¨ğŸ‡³ å°æ¹¾, ğŸ‡¯ğŸ‡µ æ—¥æœ¬, ğŸ‡ºğŸ‡¸ ç¾å›½, ğŸ‡ºğŸ‡³ å…¶ä»–, âœŒï¸ æ‰‹åŠ¨é€‰æ‹©
ğŸ’¾ ç½‘ç›˜æœåŠ¡ = select, DIRECT, ğŸª èŠ‚ç‚¹é€‰æ‹©, ğŸ‡­ğŸ‡° é¦™æ¸¯, ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡, ğŸ‡¨ğŸ‡³ å°æ¹¾, ğŸ‡¯ğŸ‡µ æ—¥æœ¬, ğŸ‡ºğŸ‡¸ ç¾å›½, ğŸ‡ºğŸ‡³ å…¶ä»–, âœŒï¸ æ‰‹åŠ¨é€‰æ‹©
ğŸ“§ é‚®ä»¶æœåŠ¡ = select, ğŸª èŠ‚ç‚¹é€‰æ‹©, ğŸ‡­ğŸ‡° é¦™æ¸¯, ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡, ğŸ‡¨ğŸ‡³ å°æ¹¾, ğŸ‡¯ğŸ‡µ æ—¥æœ¬, ğŸ‡ºğŸ‡¸ ç¾å›½, ğŸ‡ºğŸ‡³ å…¶ä»–, âœŒï¸ æ‰‹åŠ¨é€‰æ‹©, DIRECT
ğŸ“¡ æµ‹é€ŸæœåŠ¡ = select, DIRECT, ğŸª èŠ‚ç‚¹é€‰æ‹©, ğŸ‡­ğŸ‡° é¦™æ¸¯, ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡, ğŸ‡¨ğŸ‡³ å°æ¹¾, ğŸ‡¯ğŸ‡µ æ—¥æœ¬, ğŸ‡ºğŸ‡¸ ç¾å›½, ğŸ‡ºğŸ‡³ å…¶ä»–, âœŒï¸ æ‰‹åŠ¨é€‰æ‹©
ğŸŒ è°·æ­ŒæœåŠ¡ = select, DIRECT, ğŸª èŠ‚ç‚¹é€‰æ‹©, ğŸ‡­ğŸ‡° é¦™æ¸¯, ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡, ğŸ‡¨ğŸ‡³ å°æ¹¾, ğŸ‡¯ğŸ‡µ æ—¥æœ¬, ğŸ‡ºğŸ‡¸ ç¾å›½, ğŸ‡ºğŸ‡³ å…¶ä»–, âœŒï¸ æ‰‹åŠ¨é€‰æ‹©
ğŸ® æ¸¸æˆæœåŠ¡ = select, ğŸª èŠ‚ç‚¹é€‰æ‹©, ğŸ‡­ğŸ‡° é¦™æ¸¯, ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡, ğŸ‡¨ğŸ‡³ å°æ¹¾, ğŸ‡¯ğŸ‡µ æ—¥æœ¬, ğŸ‡ºğŸ‡¸ ç¾å›½, ğŸ‡ºğŸ‡³ å…¶ä»–, âœŒï¸ æ‰‹åŠ¨é€‰æ‹©, DIRECT
ğŸ“¹ å›½é™…åª’ä½“ = select, ğŸª èŠ‚ç‚¹é€‰æ‹©, ğŸ‡­ğŸ‡° é¦™æ¸¯, ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡, ğŸ‡¨ğŸ‡³ å°æ¹¾, ğŸ‡¯ğŸ‡µ æ—¥æœ¬, ğŸ‡ºğŸ‡¸ ç¾å›½, ğŸ‡ºğŸ‡³ å…¶ä»–, âœŒï¸ æ‰‹åŠ¨é€‰æ‹©, DIRECT
ğŸ“º æ¸¯å°åª’ä½“ = select, DIRECT, ğŸª èŠ‚ç‚¹é€‰æ‹©, ğŸ‡­ğŸ‡° é¦™æ¸¯, ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡, ğŸ‡¨ğŸ‡³ å°æ¹¾, ğŸ‡¯ğŸ‡µ æ—¥æœ¬, ğŸ‡ºğŸ‡¸ ç¾å›½, ğŸ‡ºğŸ‡³ å…¶ä»–, âœŒï¸ æ‰‹åŠ¨é€‰æ‹©
ğŸ’¾ å¾®è½¯æœåŠ¡ = select, DIRECT, ğŸª èŠ‚ç‚¹é€‰æ‹©, ğŸ‡­ğŸ‡° é¦™æ¸¯, ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡, ğŸ‡¨ğŸ‡³ å°æ¹¾, ğŸ‡¯ğŸ‡µ æ—¥æœ¬, ğŸ‡ºğŸ‡¸ ç¾å›½, ğŸ‡ºğŸ‡³ å…¶ä»–, âœŒï¸ æ‰‹åŠ¨é€‰æ‹©
ğŸ è‹¹æœæœåŠ¡ = select, DIRECT, ğŸª èŠ‚ç‚¹é€‰æ‹©, ğŸ‡­ğŸ‡° é¦™æ¸¯, ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡, ğŸ‡¨ğŸ‡³ å°æ¹¾, ğŸ‡¯ğŸ‡µ æ—¥æœ¬, ğŸ‡ºğŸ‡¸ ç¾å›½, ğŸ‡ºğŸ‡³ å…¶ä»–, âœŒï¸ æ‰‹åŠ¨é€‰æ‹©
ğŸŸ æ¼ç½‘ä¹‹é±¼ = select, ğŸª èŠ‚ç‚¹é€‰æ‹©, ğŸ‡­ğŸ‡° é¦™æ¸¯, ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡, ğŸ‡¨ğŸ‡³ å°æ¹¾, ğŸ‡¯ğŸ‡µ æ—¥æœ¬, ğŸ‡ºğŸ‡¸ ç¾å›½, ğŸ‡ºğŸ‡³ å…¶ä»–, âœŒï¸ æ‰‹åŠ¨é€‰æ‹©, DIRECT
# å®¶åº­å†…ç½‘ä»£ç†ï¼Œå¦‚éœ€ä½¿ç”¨ï¼Œä¿®æ”¹ä»¥ä¸‹ä¸¤é¡¹ï¼Œå¹¶æ·»åŠ åŸŸåè§„åˆ™
# ğŸŒ€ å®¶åº­å†…ç½‘ = subnet, default = ğŸ ï¸ å®¶åº­èŠ‚ç‚¹, "SSID:HOME SSID" = DIRECT, "TYPE:WIRED" = DIRECT
# ğŸ ï¸ å®¶åº­èŠ‚ç‚¹ = select, DIRECT, policy-path=https://sub.store/download/collection/All, update-interval=86400, policy-regex-filter=(å®¶åº­)
âœŒï¸ æ‰‹åŠ¨é€‰æ‹© = select, policy-path=https://sub.store/download/collection/All, update-interval=86400, policy-regex-filter=^((?!(æ ¡å†…|ç§æœ‰|ç›´è¿|å¤‡çº¿)).)*$
ğŸ‡­ğŸ‡° é¦™æ¸¯ = url-test, policy-path=https://sub.store/download/collection/All, update-interval=86400, policy-regex-filter=(?=.*(æ¸¯|HK|(?i)Hong))(?=.*(AmyTelecom)).*$, interval=300, tolerance=150, timeout=1, no-alert=true
ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡ = url-test, policy-path=https://sub.store/download/collection/All, update-interval=86400, policy-regex-filter=(?=.*(æ–°åŠ å¡|SG|(?i)Singapore))(?=.*(AmyTelecom)).*$, interval=300, tolerance=150, timeout=1, no-alert=true
ğŸ‡¨ğŸ‡³ å°æ¹¾ = url-test, policy-path=https://sub.store/download/collection/All, update-interval=86400, policy-regex-filter=(?=.*(å°|TW|(?i)Taiwan))(?=.*(AmyTelecom)).*$, interval=300, tolerance=150, timeout=1, no-alert=true
ğŸ‡¯ğŸ‡µ æ—¥æœ¬ = url-test, policy-path=https://sub.store/download/collection/All, update-interval=86400, policy-regex-filter=(?=.*(æ—¥|JP|(?i)Japan))(?=.*(AmyTelecom)).*$, interval=300, tolerance=150, timeout=1, no-alert=true
ğŸ‡ºğŸ‡¸ ç¾å›½ = url-test, policy-path=https://sub.store/download/collection/All, update-interval=86400, policy-regex-filter=(?=.*(ç¾|US|(?i)United\sStates))(?=.*(AmyTelecom)).*$, interval=300, tolerance=150, timeout=1, no-alert=true
ğŸ‡ºğŸ‡³ å…¶ä»– = select, policy-path=https://sub.store/download/collection/All, update-interval=86400, policy-regex-filter=^((?!(æ¸¯|HK|(?i)Hong|å°|TW|(?i)Taiwan|æ—¥|JP|(?i)Japan|æ–°åŠ å¡|(?i)Singapore|SG|ç¾|(?i)United\sStates|US)).)*$
â›”ï¸ éšç§å¹¿å‘Š = select, REJECT, DIRECT, ğŸª èŠ‚ç‚¹é€‰æ‹©


[Rule]
# > å®¶åº­å†…ç½‘
# DOMAIN-SUFFIX,home.example.com,ğŸŒ€ å®¶åº­å†…ç½‘

# > è§„åˆ™ä¿®æ­£
RULE-SET,https://raw.githubusercontent.com/Xm798/Tools/main/ProxyRules/Surge/Proxy.list,ğŸª èŠ‚ç‚¹é€‰æ‹©
RULE-SET,https://raw.githubusercontent.com/Xm798/Tools/main/ProxyRules/Surge/Direct.list,DIRECT
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Direct/Direct.list,DIRECT
# > å¹¿å‘Šæ‹¦æˆª
DOMAIN-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Advertising/Advertising_Domain.list,â›”ï¸ éšç§å¹¿å‘Š
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Advertising/Advertising.list,â›”ï¸ éšç§å¹¿å‘Š
# > å„ç±»æœåŠ¡
# Lark
RULE-SET,https://cdn.jsdelivr.net/gh/Xm798/Tools@latest/ProxyRules/Surge/Lark.list,ğŸª èŠ‚ç‚¹é€‰æ‹©
# AI
RULE-SET,https://raw.githubusercontent.com/Xm798/Tools/main/ProxyRules/Surge/AI.list,ğŸ¤– AI Chat
# E-Hentai
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/EHGallery/EHGallery.list,ğŸï¸ E-Hentai
# PT
RULE-SET,https://raw.githubusercontent.com/Xm798/Tools/main/ProxyRules/Surge/PT.list,ğŸ—³ï¸ PT ç«™ç‚¹
# ç½‘ç›˜
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/GoogleDrive/GoogleDrive.list,ğŸ’¾ ç½‘ç›˜æœåŠ¡
# é‚®ä»¶
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Mail/Mail.list,ğŸ“§ é‚®ä»¶æœåŠ¡
# Telegram
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Telegram/Telegram.list,ğŸª èŠ‚ç‚¹é€‰æ‹©
# æµåª’ä½“
DOMAIN-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Spotify/Spotify.list,ğŸ¼ Spotify
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Emby/Emby.list,ğŸ“¹ å›½é™…åª’ä½“
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/AsianMedia/AsianMedia.list,ğŸ“º æ¸¯å°åª’ä½“
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/GlobalMedia/GlobalMedia.list,ğŸ“¹ å›½é™…åª’ä½“
# å¾®ä¿¡
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/WeChat/WeChat.list,DIRECT
# æµ‹é€Ÿ
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Speedtest/Speedtest.list,ğŸ“¡ æµ‹é€ŸæœåŠ¡
# æ¸¸æˆ
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/SteamCN/SteamCN.list,DIRECT
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Steam/Steam.list,ğŸ® æ¸¸æˆæœåŠ¡
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Epic/Epic.list,ğŸ® æ¸¸æˆæœåŠ¡
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Game/Game.list,ğŸ® æ¸¸æˆæœåŠ¡
# è°·æ­Œ
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Google/Google.list,ğŸŒ è°·æ­ŒæœåŠ¡
# ä»£ç†
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/ProxyLite/ProxyLite.list,ğŸª èŠ‚ç‚¹é€‰æ‹©
# å¾®è½¯
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Microsoft/Microsoft.list,ğŸ’¾ å¾®è½¯æœåŠ¡
# è‹¹æœ
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/AppleProxy/AppleProxy.list,ğŸª èŠ‚ç‚¹é€‰æ‹©
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Apple/Apple.list,ğŸ è‹¹æœæœåŠ¡
DOMAIN-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Apple/Apple_Domain.list,ğŸ è‹¹æœæœåŠ¡
# > ä»£ç†è§„åˆ™
# DOMAIN-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Global/Global_Domain.list,ğŸª èŠ‚ç‚¹é€‰æ‹©
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Global/Global.list,ğŸª èŠ‚ç‚¹é€‰æ‹©
# > ç›´è¿è§„åˆ™
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Lan/Lan.list,DIRECT
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/ChinaMedia/ChinaMedia.list,DIRECT
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/PrivateTracker/PrivateTracker.list,DIRECT
DOMAIN-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/China/China_Domain.list,DIRECT
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/China/China.list,DIRECT
RULE-SET,SYSTEM,DIRECT
RULE-SET,LAN,DIRECT
GEOIP,CN,DIRECT
# Final
FINAL,ğŸª èŠ‚ç‚¹é€‰æ‹©,dns-failed


[Host]


[MITM]
hostname = -gateway.icloud.com, -weather-data.apple.com, -buy.itunes.apple.com, -pan.baidu.com


[Script]

